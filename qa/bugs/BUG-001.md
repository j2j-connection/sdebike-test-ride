# BUG-001: Supabase Storage Bucket Missing

## Summary
The application fails to upload ID photos and waiver files because the required Supabase storage bucket `customer-files` does not exist.

## Severity
**HIGH** - Blocks core functionality (ID photo upload and waiver storage)

## Description
When attempting to upload ID photos or generate waiver files, the application receives 400/403/404 errors from Supabase Storage API calls. Investigation reveals that the `customer-files` storage bucket has not been created in the Supabase project.

## Steps to Reproduce
1. Start the application with `npm run dev`
2. Navigate to the test ride signup flow
3. Attempt to upload an ID photo
4. Observe error in browser console: `400 Bad Request` or `403 Forbidden`

## Expected Behavior
- ID photos should upload successfully to Supabase Storage
- Waiver files should be generated and stored
- No storage-related errors should occur

## Actual Behavior
- Storage API calls fail with HTTP 400/403/404 errors
- File uploads cannot complete
- User cannot proceed with test ride signup

## Technical Details
- **Error**: Supabase Storage bucket `customer-files` missing
- **Location**: File upload operations in `ContactStep.tsx` and waiver generation
- **API Endpoint**: Supabase Storage REST API
- **Authentication**: Service role key is present and valid

## Root Cause
The Supabase project was created with database tables but the storage infrastructure was not set up. Storage buckets must be created manually or via script.

## Solution
Create the required storage bucket and configure RLS policies:

1. **Manual Creation**: Use Supabase dashboard to create `customer-files` bucket
2. **Scripted Creation**: Run `setup-storage.js` script to programmatically create bucket
3. **Subdirectories**: Create `id-photos/` and `waivers/` subdirectories
4. **RLS Policies**: Configure appropriate access policies for file uploads

## Files Affected
- `src/components/steps/ContactStep.tsx` - ID photo upload
- `src/lib/services/testDriveService.ts` - Waiver file storage
- `src/lib/waiverTemplate.ts` - Waiver generation

## Status
**RESOLVED** - Storage bucket created via `setup-storage.js` script

## Resolution Notes
- Created `setup-storage.js` script to automate storage setup
- Script creates bucket, subdirectories, and RLS policies
- Test upload confirmed successful after bucket creation
- All file upload operations now working correctly

## Prevention
- Include storage setup in project initialization scripts
- Document storage requirements in project setup guide
- Add storage health checks to application startup
